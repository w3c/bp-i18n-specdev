<!DOCTYPE html>
<html LANG="EN">
  <head>
    <title>Internationalization Best Practices for Spec Developers</title>
    <meta charset='utf-8'/>
	<link rel="stylesheet" href="local.css" type="text/css" />
    <script src="dumpdata.js" type="application/ecmascript"></script>
    <!-- 
      === NOTA BENE ===
      For the three scripts below, if your spec resides on dev.w3 you can check them
      out in the same tree and use relative links so that they'll work offline,
     -->
    <script src='http://www.w3.org/Tools/respec/respec-w3c-common' class='remove'></script>
    <script class='remove'>
      var respecConfig = {
          // specification status (e.g. WD, LCWD, NOTE, etc.). If in doubt use ED.
          specStatus:           "ED",
          //publishDate:  		"2015-10-20",
          //previousPublishDate:  "2014-12-16",
          //previousMaturity:  "FPWD",


          noRecTrack:           true,
          shortName:            "bp-i18n-specdev",
          copyrightStart: 		"2014",
          edDraftURI:   		"http://w3c.github.io/bp-i18n-specdev/",

          // editors, add as many as you like
          // only "name" is required
          editors:  [
              { name: "Richard Ishida", url: "",
                company: "W3C", companyURL: "" },
          ],


          wg:           "Internationalization Working Group",
          wgURI:        "http://www.w3.org/International/core/",
          wgPublicList: "www-international",
		  bugTracker: { new: "https://github.com/w3c/bp-i18n-specdev/issues", open: "https://github.com/w3c/bp-i18n-specdev/issues" } ,
		otherLinks: [
			{
			key: "Github",
			data: [
				{
			  	value: "repository",
			  	href: "https://github.com/w3c/bp-i18n-specdev"
		 		}
				]
			}
			],


          // URI of the patent status for this WG, for Rec-track documents
          // !!!! IMPORTANT !!!!
          // This is important for Rec-track documents, do not copy a patent URI from a random
          // document unless you know what you're doing. If in doubt ask your friendly neighbourhood
          // Team Contact.
          wgPatentURI:  "http://www.w3.org/2004/01/pp-impl/32113/status",
		  maxTocLevel: 2,
      };
    </script>
  </head>
  <body>
  <div id="sotd">
  <p>This document provides advice to specification developers about how to incorporate requirements for international use. What is currently available here is expected to be useful immediately, but is a very early draft and the document is in flux, and will grow over time as knowledge applied in reviews and discussions can be crystallized into guidelines.</p>
    <div class="note">
    <p data-lang="en" style="font-weight: bold; font-size: 120%">Sending comments on this document</p>
  	<p data-lang="en">If you wish to make comments regarding this document, please raise them as <a href="https://github.com/w3c/bp-i18n-specdev/issues" style="font-size: 120%;">github issues</a><!-- against the <a href="http://www.w3.org/TR/2015/WD-ilreq-20150721/" style="font-size: 120%">latest dated version in /TR</a>-->. Only send comments by email if you are unable to raise issues on github (see links below).   All comments are welcome.</p>
  	<p data-lang="en">To make it easier to track comments, please raise separate issues or emails for each comment, and point to the section you are commenting on using  a URL for the dated version of the document.</p>
    </div>
</div>
  
    <div id="abstract">
      <p>This document provides a checklist of internationalization-related considerations when developing a specification. Most checklist items point to detailed supporting information in other documents. Where such information does not yet exist, it can be given a temporary home in this document. The dynamic page <a href="http://www.w3.org/International/techniques/developing-specs-dynamic">Internationalization Techniques: 
        Developing specifications</a> is automatically generated from this document. <strong>The current version is still a very early draft, and it is expected that the information will change regularly as new content is added and existing content is modified in the light of experience and discussion.</strong></p>
  </div>

  <section id="intro">
    <h2>Introduction</h2>
      <p>Developers of specifications need advice  to ensure that what they produce will work for communities around the globe.</p>
      <p>The Internationalization (i18n) WG tries to assist working groups  by reviewing specifications and engaging in discussion. Often, however, such interventions come later in the process than would be ideal, or mean that the i18n WG has to repeat the same information for each working group it interacts with.</p>
      <p>It would be better if specification developers could access a checklist of best practices, which points  to explanations, examples and rationales where developers need it. Developers would then be able to build this knowledge into their work from the earliest stages, and could thereby reduce  rework needed when the i18n WG reviews their specification.</p>
      <p>This document contains the beginnings of a checklist, and points to locations where you can find explanations, examples and rationales for recommendations&nbsp;made.&nbsp; If there is no such other place, that extra information will be added to this document. It is still early days for this document, and it may also be used to develop ideas and organize them.</p>
      <p>You may prefer to use <a href="http://www.w3.org/International/techniques/developing-specs-dynamic">Internationalization Techniques: Developing specifications</a> most of the time, since it uses JavaScript to  help you more quickly see what's available and drill down to the information you need. (Where needed, it links to this or other documents.) There is also a <a href="http://www.w3.org/International/techniques/developing-specs">non-dynamic version</a> of the document available.</p>
      <!--p class="note">The number associated with a given best practice statement (the text in the yellow box) may change as the document changes. If you want to refer to a particular best practise statement in a time-persistent way, use the id associated with it.</p-->
  </section>
  <section id="characters" class="topic">
<h2>Characters</h2>
				<ul class="summary">
					<li><a href="#char_def">Choosing a definition of  'character' </a></li>
					<li><a href="#char_referencemodel">Defining a Reference Processing Model </a></li>
					<li><a href="#char_ranges">Including and excluding character ranges</a></li>
					<li><a href="#char_pua">Using the Private Use Area </a></li>
					<li><a href="#char_choosing">Choosing character encodings </a></li>
					<li><a href="#char_identifying">Identifying character encodings </a></li>
					<li><a href="#char_escapes">Designing character escapes </a></li>
					<li><a href="#char_storing">Storing text </a></li>
					<li><a href="#char_sort">Specifying sort and search functionality </a></li>
					<li><a href="#char_string">Defining 'string' </a></li>
					<li><a href="#char_indexing">Indexing strings </a></li>
					<li><a href="#char_unicoderef">Referencing the Unicode Standard </a></li>
				</ul>
<p>See the <a href="http://www.w3.org/TR/charmod/">Character Model for the World Wide Web: Fundamentals</a> for basic guidelines related to the use of characters and encodings.</p>
<p>See the <a href="https://encoding.spec.whatwg.org/">Encoding</a> specification for further guidelines related to use of character encodings.</p>
<p>Another Character Model document is currently in development, entitled <a href="http://w3c.github.io/charmod-norm/">String Matching and Searching</a>. It looks at issues that arise when you try to compare two strings, be it identifiers or authored content.</p>

<section id="char_def" class="subtopic">
    <h3>Choosing a definition of 'character'</h3>
    <p class="bp" id="char_sounds"><a class="self" href="#char_sounds">&#x200B;</a>Specifications, software and content MUST NOT require or depend on a one-to-one correspondence between characters and the sounds of a language. <a href="http://www.w3.org/TR/charmod/#C001">more</a></p>
    <p class="bp" id="char_display"><a class="self" href="#char_display">&#x200B;</a>Specifications, software and content MUST NOT require or depend on a one-to-one mapping between characters and units of displayed text. <a href="http://www.w3.org/TR/charmod/#C002">more</a></p>
    <p class="bp" id="char_logical"><a class="self" href="#char_logical">&#x200B;</a>Protocols, data formats and APIs MUST store, interchange or process text data in logical order. <a href="http://www.w3.org/TR/charmod/#C003">more</a></p>
    <p class="bp" id="char_logical_storage"><a class="self" href="#char_logical_storage">&#x200B;</a>Independent of whether some implementation uses logical selection or visual selection, characters selected MUST be kept in logical order in storage. <a href="http://www.w3.org/TR/charmod/#C075">more</a></p>
    <p class="bp" id="char_logical_discontiguous"><a class="self" href="#char_logical_discontiguous">&#x200B;</a>Specifications of protocols and APIs that involve selection of ranges SHOULD provide for discontiguous logical selections, at least to the extent necessary to support implementation of visual selection on screen on top of those protocols and APIs. <a href="http://www.w3.org/TR/charmod/#C004">more</a></p>
    <p class="bp" id="char_keystroke"><a class="self" href="#char_keystroke">&#x200B;</a>Specifications and software MUST NOT require nor depend on a single keystroke resulting in a single character, nor that a single character be input with a single keystroke (even with modifiers), nor that keyboards are the same all over the world. <a href="http://www.w3.org/TR/charmod/#C005">more</a></p>
    <p class="bp" id="char_physical_storage"><a class="self" href="#char_physical_storage">&#x200B;</a>Specifications, software and content MUST NOT require or depend on a one-to-one relationship between characters and units of physical storage. <a href="http://www.w3.org/TR/charmod/#C009">more</a></p>
    <p class="bp" id="char_define"><a class="self" href="#char_define">&#x200B;</a>When specifications use the term 'character' the specifications MUST define which meaning they intend. <a href="http://www.w3.org/TR/charmod/#C010">more</a></p>
    <p class="bp" id="char_specific"><a class="self" href="#char_specific">&#x200B;</a>Specifications SHOULD use specific terms, when available, instead of the general term 'character'. <a href="http://www.w3.org/TR/charmod/#C067">more</a></p>
  
  <section class="links"><h4>Links</h4>
  <section class="howto"><h5>How to's</h5>
        <ul>
          <li class="w3">
            <p class="link"><a href="http://www.w3.org/TR/charmod/#sec-Perceptions">Perceptions of Characters </a></p>
            <p class="desc">In W3C Recommendation, <a href="http://www.w3.org/TR/charmod/#sec-Characters">Character Model for the World Wide Web</a>.</p>
          </li>
        </ul>
      </section>
      </section>
<section class="xref"><h4>See also</h4>
        <p><a href="#string">Defining 'string'</a>.</p>
      </section>
      </section>
  
  
  <section id="char_referencemodel" class="subtopic">
    <h3>Defining a Reference Processing Model</h3>
    <p class="bp" id="char_single_enc"><a class="self" href="#char_single_enc">&#x200B;</a>Textual data objects defined by protocol or format specifications MUST be in a single character encoding. <a href="http://www.w3.org/TR/charmod/#C013">more</a></p>
    <p class="bp" id="char_rpm"><a class="self" href="#char_rpm">&#x200B;</a>All specifications that involve processing of text MUST specify the processing of text according to the Reference Processing Model described by the rest of the recommendations in this list. <a href="http://www.w3.org/TR/charmod/#C014">more</a></p>
    <p class="bp" id="char_unicode_chars"><a class="self" href="#char_unicode_chars">&#x200B;</a>Specifications MUST define text in terms of Unicode characters, not bytes or glyphs. <a href="http://www.w3.org/TR/charmod/#C014">more</a></p>
    <p class="bp" id="char_transcode"><a class="self" href="#char_transcode">&#x200B;</a>For their textual data objects specifications MAY allow use of any character encoding which can be transcoded to a Unicode encoding form. <a href="http://www.w3.org/TR/charmod/#C014">more</a></p>
    <p class="bp" id="char_as_unicode"><a class="self" href="#char_as_unicode">&#x200B;</a>Specifications MAY choose to disallow or deprecate some character encodings and to make others mandatory. Independent of the actual character encoding, the specified behavior MUST be the same as if the processing happened as follows: (a) The character encoding of any textual data object received by the application implementing the specification MUST be determined and the data object MUST be interpreted as a sequence of Unicode characters - this MUST be equivalent to transcoding the data object to some Unicode encoding form, adjusting any character encoding label if necessary, and receiving it in that Unicode encoding form, (b) All processing MUST take place on this sequence of Unicode characters, (c) If text is output by the application, the sequence of Unicode characters MUST be encoded using a character encoding chosen among those allowed by the specification. <a href="http://www.w3.org/TR/charmod/#C014">more</a></p>
    <p class="bp" id="char_different_enc"><a class="self" href="#char_different_enc">&#x200B;</a>If a specification is such that multiple textual data objects are involved (such as an XML document referring to external parsed entities), it MAY choose to allow these data objects to be in different character encodings. In all cases, the Reference Processing Model MUST be applied to all textual data objects. <a href="http://www.w3.org/TR/charmod/#C014">more</a></p>


    <section class="links">
      <h4>Links</h4>
      <section class="howto">
        <h5>How to's</h5>
        <ul>
          <li class="w3">
            <p class="link"><a href="http://www.w3.org/TR/charmod/#sec-Characters">Digital Encoding of Characters </a></p>
            <p class="desc">In W3C Recommendation, <a href="http://www.w3.org/TR/charmod/#sec-Characters">Character Model for the World Wide Web</a>.</p>
          </li>
        </ul>
      </section>
    </section>
    <section class="xref">
      <h4>See also</h4>
      <p><a href="#indoc">Including and excluding character ranges</a>.</p>
    </section>
  </section>
  
  
  <section id="char_ranges" class="subtopic">
    <h3>Including and excluding character ranges </h3>
    <p class="bp" id="char_exclude"><a class="self" href="#char_exclude">&#x200B;</a>Specifications SHOULD NOT arbitrarily exclude code points from the full range of Unicode code points from U+0000 to U+10FFFF inclusive. <a href="http://www.w3.org/TR/charmod/#C070">more</a></p>
    <p class="bp" id="char_10ffff"><a class="self" href="#char_10ffff">&#x200B;</a>Specifications MUST NOT allow code points above U+10FFFF. <a href="http://www.w3.org/TR/charmod/#C077">more</a></p>
    <p class="bp" id="char_internal_use"><a class="self" href="#char_internal_use">&#x200B;</a>Specifications SHOULD NOT allow the use of codepoints reserved by Unicode for internal use. <a href="http://www.w3.org/TR/charmod/#C079">more</a></p>
    <p class="bp" id="char_surrogate"><a class="self" href="#char_surrogate">&#x200B;</a>Specifications MUST NOT allow the use of surrogate code points. <a href="http://www.w3.org/TR/charmod/#C078.">more</a></p>
    <p class="bp" id="char_compatibility"><a class="self" href="#char_compatibility">&#x200B;</a>Specifications SHOULD exclude compatibility characters in the syntactic elements (markup, delimiters, identifiers) of the formats they define. <a href="http://www.w3.org/TR/charmod/#C050">more</a></p>


    <section class="links">
      <h4>Links</h4>
      <section class="howto">
        <h5>How to's</h5>
        <ul>
          <li class="w3">
            <p class="link"><a href="http://www.w3.org/TR/charmod/#sec-Characters">Digital Encoding of Characters </a></p>
            <p class="desc">In W3C Recommendation, <a href="http://www.w3.org/TR/charmod/#sec-Characters">Character Model for the World Wide Web</a>.</p>
          </li>
        </ul>
      </section>
    </section>
    <section class="xref">
      <h4>See also</h4>
      <p><a href="#pua">Using the Private Use Area</a>.</p>
    </section>
  </section>
  
  
  <section id="char_pua" class="subtopic">
    <h3>Using the Private Use Area</h3>
    <p class="bp" id="char_not_pua"><a class="self" href="#char_not_pua">&#x200B;</a>Specifications MUST NOT require the use of private use area characters with particular assignments. <a href="http://www.w3.org/TR/charmod/#C038">more</a></p>
    <p class="bp" id="char_pua_mechanisms"><a class="self" href="#char_pua_mechanisms">&#x200B;</a>Specifications MUST NOT require the use of mechanisms for defining agreements of private use code points. <a href="http://www.w3.org/TR/charmod/#C039">more</a></p>
    <p class="bp" id="char_pua_allow"><a class="self" href="#char_pua_allow">&#x200B;</a>Specifications and implementations SHOULD NOT disallow the use of private use code points by private agreement. <a href="http://www.w3.org/TR/charmod/#C040">more</a></p>
    <p class="bp" id="char_symbols"><a class="self" href="#char_symbols">&#x200B;</a>Specifications MAY define markup to allow the transmission of symbols not in Unicode or to identify specific variants of Unicode characters. <a href="http://www.w3.org/TR/charmod/#C041.">more</a></p>
    <p class="bp" id="char_pictures"><a class="self" href="#char_pictures">&#x200B;</a>Specifications SHOULD allow the inclusion of or reference to pictures and graphics where appropriate, to eliminate the need to (mis)use character-oriented mechanisms for pictures or graphics. <a href="http://www.w3.org/TR/charmod/#C068">more</a></p>


    <section class="links">
      <h4>Links</h4>
      <section class="howto">
        <h5>How to's</h5>
        <ul>
          <li class="w3">
            <p class="link"><a href="http://www.w3.org/TR/charmod/#sec-PrivateUse">Private use code points</a></p>
            <p class="desc">In W3C Recommendation, <a href="http://www.w3.org/TR/charmod/#sec-Characters">Character Model for the World Wide Web</a>.</p>
          </li>
        </ul>
      </section>
    </section>
    <section class="xref">
      <h4>See also</h4>
      <p><a href="#indoc">Including and excluding character ranges</a>.</p>
    </section>
  </section>
  
  
  <section id="char_choosing" class="subtopic">
    <h3>Choosing character encodings</h3>
    <p class="bp" id="char_identification"><a class="self" href="#char_identification">&#x200B;</a>Specifications MUST either specify a unique character encoding, or provide character encoding identification mechanisms such that the encoding of text can be reliably identified. <a href="http://www.w3.org/TR/charmod/#C015">more</a></p>
    <p class="bp" id="char_unique_for_new"><a class="self" href="#char_unique_for_new">&#x200B;</a>When designing a new protocol, format or API, specifications SHOULD require a unique character encoding. <a href="http://www.w3.org/TR/charmod/#C016">more</a></p>
    <p class="bp" id="char_enc_rules"><a class="self" href="#char_enc_rules">&#x200B;</a>When basing a protocol, format, or API on a protocol, format, or API that already has rules for character encoding, specifications SHOULD use rather than change these rules. <a href="http://www.w3.org/TR/charmod/#C017">more</a></p>
    <p class="bp" id="char_use_utf8"><a class="self" href="#char_use_utf8">&#x200B;</a>When a unique character encoding is required, the character encoding MUST be UTF-8, UTF-16 or UTF-32. <a href="http://www.w3.org/TR/charmod/#C018">more</a></p>
    <p>This guideline needs further consideration: utf-16 and utf-32 are not recommended these days. UTF-8 is the recommended encoding.</p>
    <p class="bp" id="char_charset"><a class="self" href="#char_charset">&#x200B;</a>Specifications SHOULD avoid using the terms 'character set' and 'charset' to refer to a character encoding, except when the latter is used to refer to the MIME charset parameter or its IANA-registered values. The term 'character encoding', or in specific cases the terms 'character encoding form' or 'character encoding scheme', are RECOMMENDED. <a href="http://www.w3.org/TR/charmod/#C020">more</a></p>
    <p class="bp" id="char_iana"><a class="self" href="#char_iana">&#x200B;</a>If the unique encoding approach is not taken, specifications SHOULD require the use of the IANA charset registry names, and in particular the names identified in the registry as 'MIME preferred names', to designate character encodings in protocols, data formats and APIs. <a href="http://www.w3.org/TR/charmod/#C021">more</a></p>
    <p>This guideline needs further consideration: the list of character encodings recommended for Web specifications is listed in the Encoding specification.</p>
    <p class="bp" id="char_non_iana"><a class="self" href="#char_non_iana">&#x200B;</a>Character encodings that are not in the IANA registry SHOULD NOT be used, except by private agreement. <a href="http://www.w3.org/TR/charmod/#C022">more</a></p>
    <p class="bp" id="char_x"><a class="self" href="#char_x">&#x200B;</a>If an unregistered character encoding is used, the convention of using 'x-' at the beginning of the name MUST be followed. <a href="http://www.w3.org/TR/charmod/#C023">more</a></p>
    <p class="bp" id="char_not_unique"><a class="self" href="#char_not_unique">&#x200B;</a>If the unique encoding approach is not chosen, specifications MUST designate at least one of the UTF-8 and UTF-16 encoding forms of Unicode as admissible character encodings and SHOULD choose at least one of UTF-8 or UTF-16 as required encoding forms (encoding forms that MUST be supported by implementations of the specification). <a href="http://www.w3.org/TR/charmod/#C026">more</a></p>
    <p class="bp" id="char_default"><a class="self" href="#char_default">&#x200B;</a>Specifications that require a default encoding MUST define either UTF-8 or UTF-16 as the default, or both if they define suitable means of distinguishing them. <a href="http://www.w3.org/TR/charmod/#C027">more</a></p>


    <section class="links">
      <h4>Links</h4>
      <section class="howto">
        <h5>How to's</h5>
        <ul>
          <li class="w3">
            <p class="link"><a href="http://www.w3.org/TR/charmod/#sec-Encodings">Choice and identification of code points</a></p>
            <p class="desc">In W3C Recommendation, <a href="http://www.w3.org/TR/charmod/#sec-Characters">Character Model for the World Wide Web</a>.</p>
          </li>
        </ul>
      </section>
      <section class="background">
        <h5>Background reading</h5>
        <ul>
          <li class="w3">
            <p class="link"><a href="/International/questions/qa-doc-charset">Document character set</a></p>
            <p class="desc">What is the 'Document Character Set' for XML and HTML, and how does it relate to the encodings I use for my documents? </p>
          </li>
        </ul>
      </section>
    </section>
  </section>
  
    
  
  <section id="char_identifying" class="subtopic">
    <h3>Identifying character encodings</h3>
    <p class="bp" id="char_heuristics"><a class="self" href="#char_heuristics">&#x200B;</a>Specifications MUST NOT propose the use of heuristics to determine the encoding of data. <a href="http://www.w3.org/TR/charmod/#C028">more</a></p>
    <p class="bp" id="char_conflict"><a class="self" href="#char_conflict">&#x200B;</a>Specifications MUST define conflict-resolution mechanisms (e.g. priorities) for cases where there is multiple or conflicting information about character encoding. <a href="http://www.w3.org/TR/charmod/#C035">more</a></p>


    <section class="links">
      <h4>Links</h4>
      <section class="howto">
        <h5>How to's</h5>
        <ul>
          <li class="w3">
            <p class="link"><a href="http://www.w3.org/TR/charmod/#sec-Encodings">Choice and identification of code points</a></p>
            <p class="desc">In W3C Recommendation, <a href="http://www.w3.org/TR/charmod/#sec-Characters">Character Model for the World Wide Web</a>.</p>
          </li>
        </ul>
      </section>
    </section>
  </section>
    
  
  <section id="char_escapes" class="subtopic">
    <h3>Designing character escapes</h3>
    <p class="bp" id="char_escaping"><a class="self" href="#char_escaping">&#x200B;</a>Specifications should provide a mechanism for escaping characters, particularly those which are invisible or ambiguous. <a href="http://w3c.github.io/bp-i18n-specdev/#char_heuristics">more</a></p>
      <p>It is generally recommended that character escapes be provided so that difficult to enter or edit sequences can be introduced using a plain text editor. Escape sequences are particularly useful for invisible or ambiguous Unicode characters, including zero-width spaces, soft-hyphens, various bidi controls, mongolian vowel separators, etc. </p>
      <p>For advice on use of escapes in markup, but which is mostly generalisable to other formats, see <a href="http://www.w3.org/International/questions/qa-escapes">Using character escapes in markup and CSS</a>.</p>
    <p class="bp" id="char_esc_new"><a class="self" href="#char_esc_new">&#x200B;</a>Specifications SHOULD NOT invent a new escaping mechanism if an appropriate one already exists. <a href="http://www.w3.org/TR/charmod/#C042">more</a></p>
    <p class="bp" id="char_esc_alternates"><a class="self" href="#char_esc_alternates">&#x200B;</a>The number of different ways to escape a character SHOULD be minimized (ideally to one). <a href="http://www.w3.org/TR/charmod/#C043">more</a></p>
    <p class="bp" id="char_esc_end"><a class="self" href="#char_esc_end">&#x200B;</a>Escape syntax SHOULD require either explicit end delimiters or a fixed number of characters in each character escape. Escape syntaxes where the end is determined by any character outside the set of characters admissible in the character escape itself SHOULD be avoided. <a href="http://www.w3.org/TR/charmod/#C044">more</a></p>
    <p class="bp" id="char_esc_hex"><a class="self" href="#char_esc_hex">&#x200B;</a>Whenever specifications define character escapes that allow the representation of characters using a number, the number MUST represent the Unicode code point of the character and SHOULD be in hexadecimal notation. <a href="http://www.w3.org/TR/charmod/#C045">more</a></p>
    <p class="bp" id="char_esc_acceptable"><a class="self" href="#char_esc_acceptable">&#x200B;</a>Escaped characters SHOULD be acceptable wherever their unescaped forms are; this does not preclude that syntax-significant characters, when escaped, lose their significance in the syntax. In particular, if a character is acceptable in identifiers and comments, then its escaped form should also be acceptable. <a href="http://www.w3.org/TR/charmod/#C046">more</a></p>


    <section class="links">
      <h4>Links</h4>
      <section class="howto">
        <h5>How to's</h5>
        <ul>
          <li class="w3">
            <p class="link"><a href="http://www.w3.org/TR/charmod/#sec-Escaping">Character escaping</a></p>
            <p class="desc">In W3C Recommendation, <a href="http://www.w3.org/TR/charmod/#sec-Characters">Character Model for the World Wide Web</a>.</p>
          </li>
        </ul>
      </section>
    </section>
  </section>
    
  
  <section id="char_storing" class="subtopic">
    <h3>Storing text</h3>
    <p class="bp" id="char_storing_logical"><a class="self" href="#char_storing_logical">&#x200B;</a>Protocols, data formats and APIs MUST store, interchange or process text data in logical order. <a href="http://www.w3.org/TR/charmod/#C003">more</a></p>
    <p class="bp" id="char_storing_discontiguous"><a class="self" href="#char_storing_discontiguous">&#x200B;</a>Specifications of protocols and APIs that involve selection of ranges SHOULD provide for discontiguous logical selections, at least to the extent necessary to support implementation of visual selection on screen on top of those protocols and APIs. <a href="http://www.w3.org/TR/charmod/#C004">more</a></p>


    <section class="links">
      <h4>Links</h4>
      <section class="howto">
        <h5>How to's</h5>
        <ul>
          <li class="w3">
            <p class="link"><a href="http://www.w3.org/TR/charmod/#sec-LogicalOrder">Visual rendering and logical order</a></p>
            <p class="desc">In W3C Recommendation, <a href="http://www.w3.org/TR/charmod/">Character Model for the World Wide Web</a>.</p>
          </li>
        </ul>
      </section>
    </section>
  </section>
    
  
  <section id="char_sort" class="subtopic">
    <h3>Specifying sort and search functionality</h3>
    <p class="bp" id="char_sort_units"><a class="self" href="#char_sort_units">&#x200B;</a>Software that sorts or searches text for users SHOULD do so on the basis of appropriate collation units and ordering rules for the relevant language and/or application. <a href="http://www.w3.org/TR/charmod/#C006">more</a></p>
    <p class="bp" id="char_sort_user"><a class="self" href="#char_sort_user">&#x200B;</a>Where searching or sorting is done dynamically, particularly in a multilingual environment, the 'relevant language' SHOULD be determined to be that of the current user, and may thus differ from user to user. <a href="http://www.w3.org/TR/charmod/#C007">more</a></p>
    <p class="bp" id="char_sort_alternatives"><a class="self" href="#char_sort_alternatives">&#x200B;</a>Software that allows users to sort or search text SHOULD allow the user to select alternative rules for collation units and ordering. <a href="http://www.w3.org/TR/charmod/#C066">more</a></p>
    <p class="bp" id="char_sort_anything"><a class="self" href="#char_sort_anything">&#x200B;</a>Specifications and implementations of sorting and searching algorithms SHOULD accommodate text that contains any character in Unicode. <a href="http://www.w3.org/TR/charmod/#C008">more</a></p>


    <section class="links">
      <h4>Links</h4>
      <section class="howto">
        <h5>How to's</h5>
        <ul>
         <li class="w3">
            <p class="link"><a href="http://www.w3.org/TR/charmod/#sec-CollationUnits">Units of collation</a></p>
            <p class="desc">In W3C Recommendation, <a href="http://www.w3.org/TR/charmod/">Character Model for the World Wide Web</a>.</p>
          </li>
        </ul>
      </section>
    </section>
  </section>
  <section id="char_n11n" class="subtopic">
    <h3>Converting to a Common Unicode Form</h3>
    <p class="bp" id="char_n11n_nfc"><a class="self" href="#char_n11n_nfc">&#x200B;</a>Specifications of text-based formats and protocols MAY specify that all or part of the textual content of that format or protocol is normalized using Unicode Normalization Form C (NFC). <a href="http://www.w3.org/TR/charmod-norm/#h-convertingtocommonunicodeform">more</a></p>
    <p class="bp" id="char_n11n_security"><a class="self" href="#char_n11n_security">&#x200B;</a>Specifications that do not normalize MUST document or provide a health-warning if canonically equivalent but disjoint Unicode character sequences represent a security issue. <a href="http://www.w3.org/TR/charmod-norm/#h-non-normalizing">more</a></p>
    <p class="bp" id="char_n11n_assumptions"><a class="self" href="#char_n11n_assumptions">&#x200B;</a>Specifications and implementations MUST NOT assume that content is in any particular normalization form. <a href="http://www.w3.org/TR/charmod-norm/#h-non-normalizing">more</a></p>
    <p class="bp" id="char_n11n_comparison"><a class="self" href="#char_n11n_comparison">&#x200B;</a>Specifications MUST specify that string matching takes the form of "code point-by-code point" comparison of the Unicode character sequence, or, if a specific Unicode character encoding is specified, code unit-by-code unit comparison of the sequences. <a href="http://www.w3.org/TR/charmod-norm/#h-non-normalizing">more</a></p>
    <p class="bp" id="char_n11n_regex"><a class="self" href="#char_n11n_regex">&#x200B;</a>Specifications that define a regular expression syntax MUST provide at least Basic Unicode Level 1 support per <cite>Unicode Technical Standard #18: Unicode Regular Expressions</cite> and SHOULD provide Extended or Tailored (Levels 2 and 3) support. <a href="http://www.w3.org/TR/charmod-norm/#h-non-normalizing">more</a></p>
    <p class="bp" id="char_n11n_comparison2"><a class="self" href="#char_n11n_comparison2">&#x200B;</a>Specifications of text-based formats and protocols that, as part of their syntax definition, require that the text be in normalized form MUST define string matching in terms of normalized string comparison and MUST define the normalized form to be NFC. <a href="http://www.w3.org/TR/charmod-norm/#h-normalizing-spec">more</a></p>
    <p class="bp" id="char_n11n_suspect"><a class="self" href="#char_n11n_suspect">&#x200B;</a>A normalizing text-processing component which receives suspect text MUST NOT perform any normalization-sensitive operations unless it has first either confirmed through inspection that the text is in normalized form or it has re-normalized the text itself. Private agreements MAY, however, be created within private systems which are not subject to these rules, but any externally observable results MUST be the same as if the rules had been obeyed. <a href="http://www.w3.org/TR/charmod-norm/#h-normalizing-spec">more</a></p>
    <p class="bp" id="char_n11n_constructs"><a class="self" href="#char_n11n_constructs">&#x200B;</a>Specifications of text-based languages and protocols SHOULD define precisely the construct boundaries necessary to obtain a complete definition of full-normalization. These definitions SHOULD include at least the boundaries between markup and character data as well as entity boundaries (if the language has any include mechanism) , SHOULD include any other boundary that may create denormalization when instances of the language are processed, but SHOULD NOT include character escapes designed to express arbitrary characters. <a href="http://www.w3.org/TR/charmod-norm/#h-normalizing-spec">more</a></p>
    <p class="bp" id="char_n11n_implementation"><a class="self" href="#char_n11n_implementation">&#x200B;</a>Where operations can produce denormalized output from normalized text input, specifications of API components (functions/methods) that implement these operations MUST define whether normalization is the responsibility of the caller or the callee. Specifications MAY state that performing normalization is optional for some API components; in this case the default SHOULD be that normalization is performed, and an explicit option SHOULD be used to switch normalization off. Specifications SHOULD NOT make the implementation of normalization optional. <a href="http://www.w3.org/TR/charmod-norm/#h-normalizing-spec">more</a></p>
    <p class="bp" id="char_n11n_mechanism"><a class="self" href="#char_n11n_mechanism">&#x200B;</a>Specifications that define a mechanism (for example an API or a defining language) for producing textual data object SHOULD require that the final output of this mechanism be normalized. <a href="http://www.w3.org/TR/charmod-norm/#h-normalizing-spec">more</a></p>
    <section class="links">
      <h4>Links</h4>
      <section class="howto">
        <h5>How to's</h5>
        <ul>
           <li class="w3">
            <p class="link"><a href="http://www.w3.org/TR/charmod-norm/#convertingToCommonUnicodeForm">Converting to a Common Unicode Form</a></p>
            <p class="desc">In W3C Working Draft, <a href="http://www.w3.org/TR/charmod-norm/">Character Model for the World Wide Web: String Matching and Searching</a>.</p>
          </li>
        </ul>
      </section>
    </section>
  </section>
  
  
  <section id="char_case" class="subtopic">
    <h3>Handling Case Folding</h3>
    <p class="bp" id="char_case_sensitive"><a class="self" href="#char_case_sensitive">&#x200B;</a>Case sensitive matching is RECOMMENDED as the default for new protocols and formats. <a href="http://www.w3.org/TR/charmod-norm/#h-handlingcasefolding">more</a></p>
    <p class="bp" id="char_case_unicodecf"><a class="self" href="#char_case_unicodecf">&#x200B;</a>Because the "simple" case-fold mapping removes information that can be important to forming an identity match, the "Common plus Full" (or "Unicode C+F") case fold mapping is RECOMMENDED for Unicode case-insensitive matching. <a href="http://www.w3.org/TR/charmod-norm/#h-handlingcasefolding">more</a></p>
    <p class="bp" id="char_case_asciici"><a class="self" href="#char_case_asciici">&#x200B;</a>ASCII case-insensitive matching MUST only be applied to vocabularies that are restricted to ASCII. Unicode case-insensitivity MUST be used for all other vocabularies. <a href="http://www.w3.org/TR/charmod-norm/#h-handlingcasefolding">more</a></p>
    <p class="bp" id="char_case_asciicinot"><a class="self" href="#char_case_asciicinot">&#x200B;</a>If the vocabulary is not restricted to ASCII or permits user-defined values that use a broader range of Unicode, ASCII case-insensitive matching MUST NOT be required. <a href="http://www.w3.org/TR/charmod-norm/#h-handlingcasefolding">more</a></p>
    <p class="bp" id="char_case_vocabularies"><a class="self" href="#char_case_vocabularies">&#x200B;</a>The Unicode C+F case-fold form is RECOMMENDED as the case-insensitive matching for vocabularies. The Unicode C+S form MUST NOT be used for string identity matching on the Web. <a href="http://www.w3.org/TR/charmod-norm/#h-handlingcasefolding">more</a></p>
    <p class="bp" id="char_case_options"><a class="self" href="#char_case_options">&#x200B;</a>Specifications and implementations that define string matching as part of the definition of a format, protocol, or formal language (which might include operations such as parsing, matching, tokenizing, etc.) MUST define the criteria and matching forms used. These MUST be one of: (a) Case-sensitive (b) Unicode case-insensitive using Unicode case-folding C+F (c) ASCII case-insensitive. <a href="http://www.w3.org/TR/charmod-norm/#h-handlingcasefolding">more</a></p>
    <p class="bp" id="char_case_noci"><a class="self" href="#char_case_noci">&#x200B;</a>Specifications SHOULD NOT specify case-insensitive comparison of strings. <a href="http://www.w3.org/TR/charmod-norm/#h-handlingcasefolding">more</a></p>
    <p class="bp" id="char_case_unicodecf2"><a class="self" href="#char_case_unicodecf2">&#x200B;</a>Specifications that specify case-insensitive comparison for non-ASCII vocabularies SHOULD specify Unicode case-folding C+F. <a href="http://www.w3.org/TR/charmod-norm/#h-handlingcasefolding">more</a></p>
    <p class="bp" id="char_case_asciionly"><a class="self" href="#char_case_asciionly">&#x200B;</a>Specifications MAY specify ASCII case-insensitive comparison for portions of a format or protocol that are restricted to an ASCII-only vocabulary. <a href="http://www.w3.org/TR/charmod-norm/#h-handlingcasefolding">more</a></p>
    <p class="bp" id="char_case_nonascii"><a class="self" href="#char_case_nonascii">&#x200B;</a>Specifications and implementations MUST NOT specify ASCII-only case-insensitive matching for values or constructs that permit non-ASCII characters. <a href="http://www.w3.org/TR/charmod-norm/#h-handlingcasefolding">more</a></p>
    <section class="links">
      <h4>Links</h4>
      <section class="howto">
        <h5>How to's</h5>
        <ul>
           <li class="w3">
            <p class="link"><a href="http://www.w3.org/TR/charmod-norm/#handlingCaseFolding">Handling Case Folding</a></p>
            <p class="desc">In W3C Working Draft, <a href="http://www.w3.org/TR/charmod-norm/">Character Model for the World Wide Web: String Matching and Searching</a>.</p>
          </li>
        </ul>
      </section>
    </section>
  </section>
    
    
    <section id="char_string" class="subtopic">
      <h3>Defining 'string'</h3>
      <p class="bp" id="char_string_byte"><a class="self" href="#char_string_byte">&#x200B;</a>Specifications SHOULD NOT define a string as a 'byte string'. <a href="http://www.w3.org/TR/charmod/#C011">more</a></p>
      <p class="bp" id="char_string_char"><a class="self" href="#char_string_char">&#x200B;</a>The 'character string' definition SHOULD be used by most specifications. <a href="http://www.w3.org/TR/charmod/#C012">more</a></p>
      
      <section class="links">
        <h4>Links</h4>
        <section class="howto">
          <h5>How to's</h5>
          <ul>
            <li class="w3">
              <p class="link"><a href="http://www.w3.org/TR/charmod/#sec-Strings">String concepts</a></p>
              <p class="desc">In W3C Recommendation, <a href="http://www.w3.org/TR/charmod/">Character Model for the World Wide Web</a>.</p>
            </li>
          </ul>
        </section>
      </section>
      <section class="xref">
        <h4>See also</h4>
        <p><a href="#indexing">Indexing strings </a> and <a href="#characterdef">Choosing a definition of 'character'</a>.</p>
      </section>
    </section>
    
    
    <section id="char_indexing" class="subtopic">
      <h3>Indexing strings</h3>
      <p class="bp" id="char_index_char"><a class="self" href="#char_index_char">&#x200B;</a>The character string is RECOMMENDED as a basis for string indexing. <a href="http://www.w3.org/TR/charmod/#C051">more</a></p>
      <p class="bp" id="char_index_codeunit"><a class="self" href="#char_index_codeunit">&#x200B;</a>A code unit string MAY be used as a basis for string indexing if this results in a significant improvement in the efficiency of internal operations when compared to the use of character string. <a href="http://www.w3.org/TR/charmod/#C052">more</a></p>
      <p class="bp" id="char_index_grapheme"><a class="self" href="#char_index_grapheme">&#x200B;</a>Grapheme clusters MAY be used as a basis for string indexing in applications where user interaction is the primary concern. <a href="http://www.w3.org/TR/charmod/#C071">more</a></p>
      <p class="bp" id="char_index_grapheme_plus"><a class="self" href="#char_index_grapheme_plus">&#x200B;</a>Specifications that define indexing in terms of grapheme clusters MUST either: (a) define grapheme clusters in terms of default grapheme clusters as defined in Unicode Standard Annex #29, Text Boundaries [UTR #29], or (b) define specifically how tailoring is applied to the indexing operation. <a href="http://www.w3.org/TR/charmod/#C074">more</a></p>
      <p>Need to check the above recommendation, since extended grapheme clusters are now recommended.</p>
      <p class="bp" id="char_index_byte"><a class="self" href="#char_index_byte">&#x200B;</a>The use of byte strings for indexing is NOT RECOMMENDED. <a href="http://www.w3.org/TR/charmod/#C072">more</a></p>
      <p class="bp" id="char_index_substrings"><a class="self" href="#char_index_substrings">&#x200B;</a>Specifications that need a way to identify substrings or point within a string SHOULD provide ways other than string indexing to perform this operation. <a href="http://www.w3.org/TR/charmod/#C053">more</a></p>
      <p class="bp" id="char_index_counting"><a class="self" href="#char_index_counting">&#x200B;</a>Specifications SHOULD understand and process single characters as substrings, and treat indices as boundary positions between counting units, regardless of the choice of counting units. <a href="http://www.w3.org/TR/charmod/#C055">more</a></p>
      <p class="bp" id="char_index_api"><a class="self" href="#char_index_api">&#x200B;</a>Specifications of APIs SHOULD NOT specify single characters or single 'units of encoding' as argument or return types. <a href="http://www.w3.org/TR/charmod/#C056">more</a></p>
      <p class="bp" id="char_index_0"><a class="self" href="#char_index_0">&#x200B;</a>When the positions between the units are counted for string indexing, starting with an index of 0 for the position at the start of the string is the RECOMMENDED solution, with the last index then being equal to the number of counting units in the string. <a href="http://www.w3.org/TR/charmod/#C057">more</a></p>
      
      <section class="links">
        <h4>Links</h4>
        <section class="howto">
          <h5>How to's</h5>
          <ul>
            <li class="w3">
              <p class="link"><a href="http://www.w3.org/TR/charmod/#sec-stringIndexing">String indexing</a></p>
              <p class="desc">In W3C Recommendation, <a href="http://www.w3.org/TR/charmod/">Character Model for the World Wide Web</a>.</p>
            </li>
          </ul>
        </section>
      </section>
      <section class="xref">
        <h4>See also</h4>
        <p><a href="#char_string">Defining 'string'</a>.</p>
      </section>
    </section>
    
    
    <section id="char_ref_Unicode_char" class="subtopic">
      <h3>Referring to Unicode characters</h3>
      <p class="bp" id="char_ref_Uchar"><a class="self" href="#char_ref_Uchar">&#x200B;</a>Use U+XXXX syntax to represent Unicode code points in the specification. <a class="local" href="http://w3c.github.io/bp_i18n_specdev/#char_ref_Uchar">more</a></p>
      <p>The U+XXXX format is well understood when referring to Unicode code points in a specification. These are space separated when appearing in a sequence. No additional decoration is needed. Note that a code point may contain four, five, or six hexadecimal digits. When fewer than four digits are needed, the code point number is zero filled. E.g. U+0020.</p>
    </section>
    
    
    <section id="char_unicoderef" class="subtopic">
      <h3>Referencing the Unicode Standard</h3>
      <p class="bp" id="char_unicoderef_do"><a class="self" href="#char_unicoderef_do">&#x200B;</a>Since specifications in general need both a definition for their characters and the semantics associated with these characters, specifications SHOULD include a reference to the Unicode Standard, whether or not they include a reference to ISO/IEC 10646. <a href="http://www.w3.org/TR/charmod/#C062">more</a></p>
      <p class="bp" id="char_unicoderef_generic"><a class="self" href="#char_unicoderef_generic">&#x200B;</a>A generic reference to the Unicode Standard MUST be made if it is desired that characters allocated after a specification is published are usable with that specification. A specific reference to the Unicode Standard MAY be included to ensure that functionality depending on a particular version is available and will not change over time. <a href="http://www.w3.org/TR/charmod/#C063">more</a></p>
      <p class="bp" id="char_unicoderef_latest"><a class="self" href="#char_unicoderef_latest">&#x200B;</a>All generic references to the Unicode Standard MUST refer to the latest version of the Unicode Standard available at the date of publication of the containing specification. <a href="http://www.w3.org/TR/charmod/#C064">more</a></p>
      <p class="bp" id="char_unicoderef_10646"><a class="self" href="#char_unicoderef_10646">&#x200B;</a>All generic references to ISO/IEC 10646 MUST refer to the latest version of ISO/IEC 10646 available at the date of publication of the containing specification. <a href="http://www.w3.org/TR/charmod/#C065">more</a></p>
      
      <section class="links">
        <h4>Links</h4>
        <section class="howto">
          <h5>How to's</h5>
          <ul>
            <li class="w3">
              <p class="link"><a href="http://www.w3.org/TR/charmod/#sec-RefUnicode">Referencing the Unicode Standard and ISO/IEC 10646</a></p>
              <p class="desc">In W3C Recommendation, <a href="http://www.w3.org/TR/charmod/">Character Model for the World Wide Web</a>.</p>
            </li>
          </ul>
        </section>
      </section>
    </section>
    
    
  </section>
  <!-- end of characters section -->
 
 
 
  <section id="language" class="topic">
  <h2>Language</h2>

		<ul class="summary">
					<li><a href="#lang_resource">Establishing the language of a resource as a whole</a></li>
					<li><a href="#lang_block">Establishing the language of blocks, paragraphs, or similar chunks of content</a></li>
					<li><a href="#lang_inline">Establishing the language of inline content spans</a></li>
					<li><a href="#lang_values">Defining language values</a></li>
					<li><a href="#lang_negotiation">Providing for content negotiation based on language</a></li>
				</ul>


 <section id="lang_resource" class="subtopic">
    <h3>Establishing the language of a resource as a whole</h3>
    <p>Here we are talking about a whole HTML page, an XML document, a JSON file, a WebVTT script, etc. </p>
    <p class="bp" id="lang_whole_res"><a class="self" href="#lang_whole_res">&#x200B;</a>It must be possible to indicate the default text-processing language for the resource as a whole. <a class="local" href="http://w3c.github.io/bp-i18n-specdev/#lang_whole_res">more</a></p>
    <p>It saves trouble to identify the language, or at least the default language, of the resource as a whole in one place. For example, in an HTML file, this is done by setting the <code class="kw" translate="no">lang</code> attribute on the <code class="kw" translate="no">html</code> element.</p>
    <p>Content within the resource should inherit the language so set, unless it is specifically overridden.</p>
    <p class="bp" id="lang_tp_meta"><a class="self" href="#lang_tp_meta">&#x200B;</a>Consider whether it is necessary to have separate declarations for the text-processing language and metadata about the expected linguistic characteristics of the intended consumer. <a class="local" href="http://w3c.github.io/bp-i18n-specdev/#lang_tp_meta">more</a></p>
    <p>The <dfn>text-processing language</dfn> is the language that is relevant for processing the content when it comes to spell-checking, styling, voice production, etc. For such operations, only one language should be identified at a time for a given range of content.</p>
    <p>Metadata about the the intended linguistic characteristics of the consumer describes the intended users of the resource as a whole, rather than specific ranges of content. For example, a blog page for  an Indian technical community may contain equal numbers of posts in English and an Hindi. It may be useful to express that, as a whole, this resource contains content in both those languages (without specifying which bits of content are in which language).</p>
 
     <section class="links">
      <h4>Links</h4>
      <section class="howto">
        <h5>How to's</h5>
        <ul>
          <li class="w3">
            <p class="link"><a href="http://w3c.github.io/bp-i18n-specdev/#lang_resource">Establishing the language of a resource as a whole</a></p>
            <p class="desc">In <a href="http://w3c.github.io/bp-i18n-specdev">Internationalization Best Practices for Spec Developers</a>.</p>
          </li>
        </ul>
      </section>
    </section>
 </section>

<section id="lang_block" class="subtopic">
  <h3>Establishing the language of blocks, paragraphs, or similar chunks of content</h3>
  <p>The word <dfn>block</dfn> is used here to refer to a structural component within the resource as a whole that groups content together and separates it from adjacent content such that the boundaries between one block and another are equivalent to paragraph or section boundaries in text. For example, this could refer to a block or paragraph in XML or HTML, an object declaration in JSON, a cue in WebVTT, etc. Contrast this with <dfn>inline</dfn> content, which describes a range within a paragraph, sentence, etc.</p>
  <p class="bp" id="lang_block_inherit"><a class="self" href="#lang_block_inherit">&#x200B;</a>By default, blocks of content should inherit the text-processing language set for the resource as a whole.   <a class="local" href="http://w3c.github.io/bp-i18n-specdev/#lang_block_inherit">more</a></p>
  <p class="bp" id="lang_block_change"><a class="self" href="#lang_block_change">&#x200B;</a>It should be possible to indicate a change in language for blocks of content where the language changes. <a class="local" href="http://w3c.github.io/bp-i18n-specdev/#lang_block_change">more</a></p>
 
     <section class="links">
      <h4>Links</h4>
      <section class="howto">
        <h5>How to's</h5>
        <ul>
          <li class="w3">
            <p class="link"><a href="http://w3c.github.io/bp-i18n-specdev/#lang_block">Establishing the language of blocks, paragraphs, or similar chunks of content</a></p>
            <p class="desc">In <a href="http://w3c.github.io/bp-i18n-specdev">Internationalization Best Practices for Spec Developers</a>.</p>
          </li>
        </ul>
      </section>
    </section>
</section>

<section id="lang_inline" class="subtopic">
  <h3>Establishing the language of inline content spans</h3>
  <p>Here we refer to content that switches to a different language in the middle of a paragraph or string.</p>
  <p class="bp" id="lang_inline_spans"><a class="self" href="#lang_inline_spans">&#x200B;</a>It should be possible to indicate language for spans of inline text where the language changes. <a class="local" href="http://w3c.github.io/bp-i18n-specdev/#lang_inline_spans">more</a></p>
  <p>Where a switch in language can affect operations on the content, such as spell-checking, rendering, styling, voice production, translation, information retrieval, and so forth, it is necessary to indicate the range of text affected and identify the language of that content.</p>
 
     <section class="links">
      <h4>Links</h4>
      <section class="howto">
        <h5>How to's</h5>
        <ul>
          <li class="w3">
            <p class="link"><a href="http://w3c.github.io/bp-i18n-specdev/#lang_inline">Establishing the language of inline content spans</a></p>
            <p class="desc">In <a href="http://w3c.github.io/bp-i18n-specdev">Internationalization Best Practices for Spec Developers</a>.</p>
          </li>
        </ul>
      </section>
    </section>
</section>

  <section id="lang_values" class="subtopic">
    <h3>Defining language values</h3>
    <p class="bp" id="lang_attribute_xml"><a class="self" href="#lang_attribute_xml">&#x200B;</a>Where language attributes already exist and are appropriate, do not create a new one.<a class="local" href="http://w3c.github.io/bp-i18n-specdev/#lang_attribute_xml">more</a></p>
    <p>For example, XML provides xml:lang which can be used in all XML formats to identify the text-processing language for a range of text.</p>
    
    
    <p class="bp" id="lang_values_bcp"><a class="self" href="#lang_values_bcp">&#x200B;</a>Language values should be BCP47 language tags.</p>
 
    <p class="bp" id="lang_values_valid"><a class="self" href="#lang_values_valid">&#x200B;</a>Be specific about the form of language tags you expect. The word "valid" has special meaning in BCP 47. Generally "well-formed" is a better choice.</p>
 
    <p class="bp" id="lang_matching_bcp"><a class="self" href="#lang_matching_bcp">&#x200B;</a>Reference BCP47 for language tag matching.</p>
 
     <section class="links">
      <h4>Links</h4>
      <section class="howto">
        <h5>How to's</h5>
        <ul>
          <li class="w3">
            <p class="link"><a href="http://w3c.github.io/bp-i18n-specdev/#lang_values">Defining language values</a></p>
            <p class="desc">In <a href="http://w3c.github.io/bp-i18n-specdev">Internationalization Best Practices for Spec Developers</a>.</p>
          </li>
        </ul>
      </section>
    </section>
  </section>
  
  <section id="lang_negotiation" class="subtopic">
    <h3>Providing for  content negotiation based on language</h3>
    <p class="bp" id="lang_neg"><a class="self" href="#lang_neg">&#x200B;</a>In a multilingual environment it must be possible for the user to receive text in the language they prefer. This may depend on implicit user preferences based on the user's system or browser setup, or on user settings explicitly negotiated with the user.</p>
  
     <section class="links">
      <h4>Links</h4>
      <section class="howto">
        <h5>How to's</h5>
        <ul>
          <li class="w3">
            <p class="link"><a href="http://w3c.github.io/bp-i18n-specdev/#lang_negotiation">Providing for  content negotiation based on language</a></p>
            <p class="desc">In <a href="http://w3c.github.io/bp-i18n-specdev">Internationalization Best Practices for Spec Developers</a>.</p>
          </li>
        </ul>
      </section>
    </section>
 </section>
</section>


<section id="direction" class="topic">
  <h2>Text direction</h2>
				<ul class="summary">
					<li><a href="#bidi_resource">Setting the bidi direction for the resource as a whole</a></li>
					<li><a href="#bidi_block">Establishing the bidi direction for blocks, paragraphs, or similar chunks of content</a></li>
					<li><a href="#bidi_inline">Establishing the bidi direction for spans of inline content</a></li>
					<li><a href="#vertical">Enabling vertical text display</a></li>
					<li><a href="#box_posn">Setting box positioning coordinates when text direction varies</a></li>
				</ul>
  
  <section id="bidi_resource" class="subtopic">
    <h3>Setting the bidi direction for the resource as a whole</h3>
    <p class="bp" id="bidi_whole_res"><a class="self" href="#bidi_whole_res">&#x200B;</a>The content author must be able to indicate the RTL/LTR direction of the content as a whole, ie. set the overall base direction. </p>
    <p class="bp" id="bidi_res_default"><a class="self" href="#bidi_res_default">&#x200B;</a>The default text direction should be declared as LTR. </p>
  </section>

<section id="bidi_block" class="subtopic">
  <h3>Establishing the bidi direction for blocks, paragraphs, or similar chunks of content</h3>
  <p class="bp" id="bidi_block_change"><a class="self" href="#bidi_block_change">&#x200B;</a>The content author must be able to indicate parts of the text where the base direction changes. This should be achieved using attributes or metadata at a block level, and not rely on Unicode control characters. </p>
  <p class="bp" id="bidi_block_auto"><a class="self" href="#bidi_block_auto">&#x200B;</a>It must be possible to also set the direction for content fragments to auto. This means that the base direction will be determined by examining the content itself.</p>
  <p class="bp" id="bidi_block_auto_receiver"><a class="self" href="#bidi_block_auto_receiver">&#x200B;</a>A typical approach here would be to set the direction based on the first strong directional character outside of any markup, but this is not the only possible method. The algorithm used to determine directionality when direction is set to auto should match that expected by the receiver. <a class="local" href="http://w3c.github.io/bp-i18n-specdev/#bidi_block_auto">more</a></p>
  <p>The first-strong algorithm looks for the first character in the paragraph with a strong directional property according to the Unicode definitions. It then sets the base direction of the paragraph according to the direction of that character.</p>
  <p>Note that the first-strong algorithm may incorrectly&nbsp;guess the direction of the paragraph when the first character is not typical of the rest of the paragraph, such as when a RTL paragraph or line starts with a LTR brand name or technical term.</p>
  <p>For additional information about algorithms for detecting direction, see <a href="http://www.w3.org/TR/html-bidi/#auto-direction-algorithms">Estimation algorithms</a> in the document where this was discussed with reference to HTML.</p>
  <p class="bp" id="bidi_block_para"><a class="self" href="#bidi_block_para">&#x200B;</a>If the overall base direction is set to auto for plain text, the direction of content paragraphs should be determined on a paragraph by paragraph basis. </p>
  <p class="bp" id="bidi_block_befaft"><a class="self" href="#bidi_block_befaft">&#x200B;</a>To indicate the sides of a block of text where relative to the start and end of its contained lines, you should use 'before' and 'after' (maybe block-start/block-end – the terminology is changing), rather than 'top' and 'bottom'. </p>
  <p class="bp" id="bidi_inline_start_end"><a class="self" href="#bidi_inline_start_end">&#x200B;</a>To indicate the start/end of a line  you should use 'start' and 'end' rather than 'left' and 'right'. </p>
  <p class="bp" id="bidi_dedicated_attr"><a class="self" href="#bidi_dedicated_attr">&#x200B;</a>Provide dedicated attributes for control of base direction and bidirectional overrides; do not rely on the user applying style properties to arbitrary markup to achieve bidi control.</p>
</section>

<section id="bidi_inline" class="subtopic">
  <h3>Establishing the bidi direction for spans of inline content</h3>
  <p class="bp" id="bidi_inline_change"><a class="self" href="#bidi_inline_change">&#x200B;</a>It must be possible to indicate spans of inline text where the base direction changes. If markup is available, this is the preferred method. Otherwise your specification must require that Unicode control characters are recognized by the receiving application, and correctly implemented.</p>
  <p class="bp" id="bidi_inline_auto"><a class="self" href="#bidi_inline_auto">&#x200B;</a>It must be possible to also set the direction for a span to auto. This means that the base direction will be determined by examining the content itself. A typical approach here would be to set the direction based on the first strong directional character outside of any markup. <a class="local" href="http://w3c.github.io/bp-i18n-specdev/#bidi_inline_auto">more</a></p>
  <p>The first-strong algorithm looks for the first character in the paragraph with a strong directional property according to the Unicode definitions. It then sets the base direction of the paragraph according to the direction of that character.</p>
  <p>Note that the first-strong algorithm may incorrectly&nbsp;guess the direction of the paragraph when the first character is not typical of the rest of the paragraph, such as when a RTL paragraph or line starts with a LTR brand name or technical term.</p>
  <p>For additional information about algorithms for detecting direction, see <a href="http://www.w3.org/TR/html-bidi/#auto-direction-algorithms">Estimation algorithms</a> in the document where this was discussed with reference to HTML.</p>
  <p class="bp" id="bidi_inline_rli"><a class="self" href="#bidi_inline_rli">&#x200B;</a>If users use Unicode bidirectional control characters, the RLI/LRI/FSI with PDI characters must be supported by the application and recommended (rather than RLE/LRE with PDF) by the spec.</p>
  <p class="bp" id="bidi_inline_rlm"><a class="self" href="#bidi_inline_rlm">&#x200B;</a>Use of RLM/LRM should be appropriate, and expectations of what those controls can and cannot do should be clear in the spec. <a class="local" href="http://w3c.github.io/bp-i18n-specdev/#bidi_inline_rlm">more</a></p>
  <p>The Unicode bidirectional control characters <span class="uname">U+200F RIGHT-TO-LEFT MARK</span> and <span class="uname">U+200E LEFT-TO-RIGHT MARK</span> are not sufficient on their own to manage bidirectional text. They cannot produce a different base direction for embedded text. For that you need to be able to indicate the start and end of the range of the embedded text.&nbsp; This is best done by markup, if available, or failing that using the other Unicode bidirectional controls mentioned just above.</p><p class="bp" id="bidi_inline_dedicated_attr"><a class="self" href="#bidi_inline_dedicated_attr">&#x200B;</a>Provide dedicated attributes for control of base direction and bidirectional overrides; do not rely on the user applying style properties to arbitrary markup to achieve bidi control.</p>
  <p class="bp" id="bidi_inline_all_elems"><a class="self" href="#bidi_inline_all_elems">&#x200B;</a>Allow bidi attributes on all inline elements in markup that contain text.</p>
  <p class="bp" id="bidi_inline_embed"><a class="self" href="#bidi_inline_embed">&#x200B;</a>Provide attributes that allow the user to (a) create an embedded base direction or (b) override the bidirectional algorithm altogether; the attribute should allow the user to set the direction to LTR or RTL in either of these two scenarios.</p>
</section>

<section id="vertical" class="subtopic">
    <h3>Enabling vertical text display</h3>
    <p class="bp" id="vertical_support"><a class="self" href="#vertical_support">&#x200B;</a>It should be possible to render text vertically for languages such as Japanese, Chinese, Korean, Mongolian, etc. </p>
    <p class="bp" id="vertical_lr_rl"><a class="self" href="#vertical_lr_rl">&#x200B;</a>Vertical text must support line progression from LTR (eg. Mongolian) and RTL (eg. Japanese) </p>
  </section>

  <section id="box_posn" class="subtopic">
    <h3>Setting box positioning coordinates when text direction varies</h3>
    <p class="bp" id="vertical_box_posn"><a class="self" href="#vertical_box_posn">&#x200B;</a>Box positioning coordinates must take into account whether the text is horizontal or vertical. <a class="local" href="http://w3c.github.io/bp-i18n-specdev/#vertical_box_posn">more</a></p>
    <p>It is typical, when localizing a user interface or web page, to create mirror-images for the RTL and LTR versions. For example, it is likely that a box that appears near the left side of a window containing English content would appear near the right side of the window if the content is Arabic or Hebrew. It should preferably automatic for this to change, based on the base direction of the current context, unless there is a strong reason for using absolute geometry. One way to achieve this is to use keywords such as <code class="kw" translate="no">start</code> and <code class="kw" translate="no">end</code>, rather than <code class="kw" translate="no">left</code> and <code class="kw" translate="no">right</code>, to indicate position.</p>
  </section>
</section>


<section id="typography" class="topic">
<h2>Typographic support</h2>
<ul class="summary">
  <li><a href="#typ_misc">Miscellaneous</a></li>
</ul>

  <section id="typ_misc" class="subtopic">
    <h3>Miscellaneous</h3>
<p class="bp" id="type_line_height"><a class="self" href="#type_line_height">&#x200B;</a>Line heights must allow for characters that are taller than English.</p>
<p class="bp" id="type_box_size"><a class="self" href="#type_box_size">&#x200B;</a>Box sizes must allow for text expansion in translation.</p>
<p class="bp" id="type_ruby"><a class="self" href="#type_ruby">&#x200B;</a>Ruby text alongside base text should be supported for CJK text.</p>
<p class="bp" id="type_linebreak"><a class="self" href="#type_linebreak">&#x200B;</a>Line wrapping should take into account the special rules needed for non-Latin scripts. <a class="local" href="http://w3c.github.io/bp-i18n-specdev/#type_linebreak">more</a></p>
<p>Various non-Latin writing systems don't simply wrap text on inter-word spaces. They have additional rules that must be respected. For example</p>
<ul>
<li>Chinese, Japanese and Korean wrap after characters, but don't put certain characters at the start/end of a line.</li>
<li>Thai and other SE Asian scripts wrap at word boundaries, but words are not delimited by spaces – spaces are instead used to separate phrases.</li>
<li>Tibetan wraps after the tsek character that follows a syllable – words are not separated by spaces, and lines can break within a word.</li>
<li>Indic and other complex scripts break at orthographic syllable boundaries, which are often two or more grapheme clusters.</li>
</ul>
<p>See the <a href="http://www.w3.org/TR/css3-text/#line-breaking">CSS Text Level 3 specification</a> for additional background. (<a href="http://r12a.github.io/scripts/tutorial/part5">This tutorial</a> provides additional examples, if needed.)</p>
<p class="bp" id="type_presentational_tags"><a class="self" href="#type_presentational_tags">&#x200B;</a>Avoid specifying presentational tags, such as <code class="kw" translate="no">b</code> for bold, and <code class="kw" translate="no">i</code> for italic. <a class="local" href="http://w3c.github.io/bp-i18n-specdev/#type_presentational_tags">more</a></p>
<p> It is best to avoid presentational markup <code class="kw" translate="no">b</code>, <code class="kw" translate="no">i</code> or <code class="kw" translate="no">u</code>, since it isn't interoperable across writing systems and furthermore may cause unnecessary problems for localisation. In addition, some scripts have native approaches to things such as emphasis, that do not involve, and can be very different from, bolding, italicisation, etc.</p>
<p>In the HTML case, there was a legacy issue, but unless there is one for your specification, the recommendation is that styling be used instead to determine the presentation of the text, and that any markup or tagging should allow for general semantic approaches.</p>
<p>For an explanation of the issues surrounding <code class="kw" translate="no">b</code> and <code class="kw" translate="no">i</code> tags, see <a href="http://www.w3.org/International/questions/qa-b-and-i-tags">Using &lt;b&gt; and &lt;i&gt; elements</a>.</p>
</section>
</section>


<section id="localizability" class="topic">
<h2>Localizability</h2>
<ul class="summary">
  <li><a href="#loc_attributes">Defining elements and attributes</a></li>
</ul>

  <section id="loc_elements_attributes" class="subtopic"><h3>Defining elements and attributes</h3>
<p class="bp" id="loc_attributes"><a class="self" href="#loc_attributes">&#x200B;</a>Do not define attribute values that will contain user readable content. Use elements for such content.  <a href="http://www.w3.org/TR/xml-i18n-bp/#DevAttributes">more</a></p>

<p class="bp" id="loc_span"><a class="self" href="#loc_span">&#x200B;</a>Provide a way for authors to annotate arbitrary inline content using a <code class="kw" translate="no">span</code>-like element or construct.  <a href="http://www.w3.org/TR/xml-i18n-bp/#DevSpan">more</a></p>

</section>

</section>


<section id="plaintext" class="topic">
<h2>Plain text support</h2>
<ul class="summary">
  <li><a href="#plain_misc">Miscellaneous</a></li>
</ul>

  <section id="plain_misc" class="subtopic">
    <h3>Miscellaneous</h3>
<p class="bp" id="plain_avoid"><a class="self" href="#plain_avoid">&#x200B;</a>Avoid natural language text in elements that only allow for plain text and in attribute values.</p>
<p class="bp" id="plain_span"><a class="self" href="#plain_span">&#x200B;</a>Provide a span-like element that can be used for any text content to apply information needed for internationalization. <a class="local" href="http://w3c.github.io/bp-i18n-specdev/#plain_span">more</a></p>
<p>Internationalization information may include a change of language, bidirectional text behaviour changes, translate flags, etc.</p>
</section>
</section>


<section id="case" class="topic">
<h2>Case distinctions</h2>
<ul class="summary">
  <li><a href="#case_misc">Miscellaneous</a></li>
</ul>

  <section id="case_misc" class="subtopic">
    <h3>Miscellaneous</h3>
<p class="bp" id="case_identifiers"><a class="self" href="#case_identifiers">&#x200B;</a>Identifiers should be case-sensitive.</p>
</section>
</section>

<section class="appendix" id="app_b">
  <h2>References</h2>
  <p>None.</p>
<!--dl>
  <dt id="css3list" title="CSS3LIST">[COUNTERS]</dt>
  <dd>Tab Atkins Jr.. <a href="http://www.w3.org/TR/css-counter-styles-3/">CSS Counter Styles Level 3</a>.   3 February 2015. W3C Candidate Recommendation. URL: <a href="http://www.w3.org/TR/css-counter-styles-3/">http://www.w3.org/TR/css-counter-styles-3/</a></dd>
  </dl-->
  </section>

<section class="appendix" id="app-c">
  <h2> Revision Log</h2>
  <ol>
    <li>tbd</li>
  </ol>
</section>


<section class="appendix">
<h2>Acknowledgements</h2>
<p>tbd</p>
</section>

<button onClick="document.getElementById('dump').value = dumpData(); document.getElementById('dump').select();">Dump data</button>
<textarea id="dump" style="width: 100%; height: 400px;"></textarea>

</body>
</html>
